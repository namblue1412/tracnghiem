:root{
  --bg:#0a0a0a; --surface:#111; --muted:#a3a3a3; --text:#f5f5f5; --line:#262626;
  --accent:#fff; --ok:#22c55e; --bad:#ef4444;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,"Helvetica Neue",Arial;background:var(--bg);color:var(--text)}
a{color:var(--text)}
.header{position:sticky;top:0;z-index:20;background:rgba(10,10,10,.7);backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
.wrap{max-width:1200px;margin:0 auto;padding:14px 16px}
.bar{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.bar.spaced{justify-content:space-between}
.grow{flex:1 1 auto}
.mt0{margin-top:0}.mt6{margin-top:6px}.mt8{margin-top:8px}.mt10{margin-top:10px}.mb2{margin-bottom:2px}
.pill{border:1px solid var(--line);border-radius:999px;padding:6px 10px;color:var(--muted);font-size:12px}
.timer{font-variant-numeric:tabular-nums;font-weight:700}
.help-icon{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border:1px solid var(--line);border-radius:999px;background:transparent;color:var(--muted);cursor:pointer;margin-left:8px}
.help-icon:hover{color:var(--text);border-color:#e5e5e5}

.card{background:var(--surface);border:1px solid var(--line);border-radius:14px;box-shadow:0 8px 28px rgba(0,0,0,.35)}
.pad{padding:16px}
.btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);border-radius:10px;padding:10px 14px;background:#141414;color:var(--text);font-weight:600;cursor:pointer}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn.ghost{background:transparent}
.btn-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.btn.small{padding:6px 10px;font-size:12px}
input[type=file]{display:none}
textarea, input[type=number], select, input[type=text], input[type=password]{
  width:100%;background:#0f0f0f;border:1px solid var(--line);color:var(--text);border-radius:10px;padding:10px 12px
}
.muted{color:var(--muted);font-size:13px}
.drop{border:1.5px dashed var(--line);border-radius:12px;padding:14px;text-align:center;color:var(--muted)}
.drop.drag{border-color:var(--accent);color:var(--text)}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
@media (max-width:980px){.grid-2,.two{grid-template-columns:1fr}}

.two{display:grid;grid-template-columns:1fr 380px;gap:14px}
.qview{display:grid;gap:12px}
.qtitle{font-size:16px;font-weight:700}
.qtext{font-size:15px}
.opts{display:grid;gap:8px}
.opt{display:flex;gap:10px;align-items:flex-start;border:1px solid var(--line);border-radius:10px;padding:10px;background:#0f0f0f}
.opt.correct{border-color:var(--ok);background:#0f1511;box-shadow:inset 0 0 0 1px var(--ok)}
.opt.wrong{border-color:var(--bad);background:#150f0f;box-shadow:inset 0 0 0 1px var(--bad)}
#qOpts input{display:none}
.badge{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;border:1px solid var(--line);border-radius:6px;font-weight:800;background:#0c0c0c;margin-top:1px;flex:0 0 auto}
.opt.chosen{border-color:#d4d4d4;background:#141414}
.exp{margin-top:10px;border:1px dashed var(--line);border-radius:10px;padding:10px;background:#0e0e0e;display:none}
.exp.show{display:block}

aside.side{display:grid;gap:12px;position:sticky;top:72px;height:max-content}
.section{background:var(--surface);border:1px solid var(--line);border-radius:12px}
.section .pad{padding:12px}
.progress{height:8px;background:#0f0f0f;border:1px solid var(--line);border-radius:999px;overflow:hidden}
.progress>span{display:block;height:100%;width:0;background:#fff}
.chips{display:flex;gap:8px;flex-wrap:wrap}
.chip{border:1px solid var(--line);border-radius:999px;padding:4px 10px;background:#0f0f0f;color:var(--muted);font-size:12px;cursor:pointer}
.chip.active{color:var(--text);border-color:#e5e5e5;background:#141414}

.matrix{max-height:calc(100vh - 260px);overflow:auto;border-top:1px solid var(--line)}
.mrow{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--line)}
.mrow:hover{background:#0f0f0f}
.mrow.current{background:#141414;box-shadow:inset 3px 0 0 #fff}
.mrow.ok{box-shadow:inset 3px 0 0 var(--ok)}
.mrow.bad{box-shadow:inset 3px 0 0 var(--bad)}
.mnum{display:flex;align-items:center;justify-content:center;width:38px;height:32px;border:1px solid var(--line);border-radius:8px;font-weight:800;cursor:pointer}
.mnum.current{outline:2px solid #e5e5e5}
.mopts{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.mopt{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);border-radius:8px;padding:6px 10px;background:#0f0f0f;cursor:pointer}
.mrow.current .mopt{background:#151515;border-color:#e5e5e5}
.mopt input{accent-color:#fff}
.mopt.correct{border-color:var(--ok);box-shadow:inset 0 0 0 1px var(--ok)}
.mopt.wrong{border-color:var(--bad);box-shadow:inset 0 0 0 1px var(--bad)}
.legend{display:flex;gap:8px;align-items:center;color:var(--muted);font-size:12px}

.table{width:100%;border-collapse:collapse;font-size:13px}
.table th,.table td{border:1px solid var(--line);padding:4px 6px;text-align:left}
.table th{background:#0f0f0f}

.hide{display:none!important}

/* Modal */
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:50}
.modal-backdrop.show{display:flex}
.modal{max-width:960px;width:92vw;max-height:86vh;overflow:auto;background:var(--surface);border:1px solid var(--line);border-radius:14px;box-shadow:0 20px 60px rgba(0,0,0,.5)}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--line)}
.modal-body{padding:12px 16px}
.modal pre{white-space:pre-wrap;background:#0f0f0f;border:1px solid var(--line);border-radius:10px;padding:12px}

/* Auth overlay + header auth area */
.auth-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.auth-card{max-width:420px;width:92vw}
.auth-card h2{margin-top:0;margin-bottom:4px}
.auth-card form{display:grid;gap:10px}
.auth-area{display:flex;align-items:center;gap:8px}
